'** SCROLLING MAP 0.3 **

'GET MAP SIZE
MAPW=PEEK(ROM(3))
MAPH=PEEK(ROM(3)+1)

'INITIAL CAMERA POSITION
CAMX=176
CAMY=188
MAPCOL=INT(CAMX/8)
MAPROW=INT(CAMY/8)

'COPY VISIBLE AREA FROM MAP MEMORY TO BACKGROUND
BG COPY MAPCOL,MAPROW,21,17 TO MAPCOL,MAPROW

GAMEPAD 1

DO
  'MOVE CAMERA
  IF UP(0) AND CAMY>0 THEN CAMY=CAMY-1
  IF DOWN(0) AND CAMY<MAPH*8-128 THEN CAMY=CAMY+1
  IF LEFT(0) AND CAMX>0 THEN CAMX=CAMX-1
  IF RIGHT(0) AND CAMX<MAPW*8-160 THEN CAMX=CAMX+1

  'GET NEW MAP POSITION
  COL=INT(CAMX/8)
  ROW=INT(CAMY/8)

  'COPY RIGHT OR LEFT EDGE FROM MAP MEMORY TO BACKGROUND
  IF COL>MAPCOL THEN
    BG COPY COL+20,ROW,1,17 TO COL+20,ROW
    MAPCOL=COL
  ELSE IF COL<MAPCOL THEN
    BG COPY COL,ROW,1,17 TO COL,ROW
    MAPCOL=COL
  END IF

  'COPY BOTTOM OR TOP EDGE FROM MAP MEMORY TO BACKGROUND
  IF ROW>MAPROW THEN
    BG COPY COL,ROW+16,21,1 TO COL,ROW+16
    MAPROW=ROW
  ELSE IF ROW<MAPROW THEN
    BG COPY COL,ROW,21,1 TO COL,ROW
    MAPROW=ROW
  END IF

  'SET BACKGROUND OFFSET (WRAPS AROUND EDGES)
  SCROLL 0,CAMX,CAMY

  WAIT VBL
LOOP


#1:MAIN PALETTES
182D0424003D3824003F2A14003F1B06
00242A150034202A00000000003F2A15

#2:MAIN CHARACTERS
00000000000000000000000000000000
00000000000000000808400200202101
030F1E1F3B3F2E05000001000400113A
C0E0C060E8C090400010389C143C6CBC
4200210008004200FDFFDFFFFFFFFFFF
BBBBBBBBBBBBBBBB4444444444444444
BBBFA7BFFFFFFFBB447C7C7C7E7E7E44
00000000000000000000000000000000
001870E0C141861C3C668F1F3FBFFE1C
1E2359D0B0A00141FFFFE7EFCFDFFFBF
0098F4E603C1F010FFFFEFDFFFFFFFFF
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000001408800200A04404
1200010003070F072D3F1E0F03070F07
80000000C0E0F0E07CFCF8F0C0E0F0E0
FE8181818181817F017F7F7F7F7F7FFF
11FF22FF88FF22FFFFFFFFFFFFFFFFFF
7FFF7EFFFEFF7EFFFF818181B1A18181
11FF7EFFFEFF22FFFF81BDBD81FFFFFF
00400060000401000020F06000020F00
02325E4EA4C08080FFFFFFFFDFBFFFFF
D88C0486030301013F7FFF7FFFFFFFFF

#3:MAIN BG
404009020A0209020A0209020A020902
0A0209020A0209020A0209020A020902
0A0209020A0204030403090209020A02
09020A0209020A0209020A0209020A02
09020A0209020A0209020A0209020902
0A0209020A0209020A0209020A020902
0A0209020A02090209020A0209020A02
090209020A0209020A0209020A020403
040319021A0219021A0219021A021902
1A0219021A0219021A0219021A021902
1A0219021A0204030403190219021A02
19021A0219021A0219021A0219021A02
19021A0219021A0219021A0219021902
1A0219021A0219021A0219021A021902
1A0219021A02190219021A0219021A02
190219021A0219021A0219021A020403
040309020A0209020A0209020A020902
0A0209020A0209020A0209020A020902
0A020000000004030403180200000100
00000000180200000000000000000000
00000802000000001100110001000100
01000000020003001802000002000300
02000300000000000802180202000300
00000100020003001802040104010403
040319021A0219021A0219021A021902
1A0219021A0219021A0219021A021902
1A021802000004030403000000000000
02000300000000001802020003000000
00000000000000000000010000000000
00000000120013000000000012001300
12001300010000001802000012001300
00000000120013000000040104010403
040309020A0209020A0209020A021802
00000802000000000000000000001802
00000802000004030403010000000000
12001300010001000000120013000802
00001802000002000300000008020000
08020000000018020200030014021402
14021402140214021402140214021402
14021402140214021402040104010403
040319021A0219021A0219021A020000
00000000020003000000180208020000
00000000000004030403000000001802
00000000010000000000000000000000
00000000000012001300010001001802
00000100010000001200130014020100
00000100050505050505000018020000
00000000000000000000040104010403
040309020A0209020A0209020A020000
02000300120013000200030000000000
00000000000004030403040300001802
00000000000002000300020003000200
03000000180200000000010000000000
00000100010000000000000014020100
11000100050505050505000000000505
05050505050500000401040104010403
040319021A0219021A0219021A020100
12001300020003001200130002000300
00001802000000000403040300000000
08020000000012001300120013001200
13000000000008020100000000000200
03000000010011000100000014020000
00000000150416041704000000000505
05050505050500000401040104030403
040309020A0209020A0209020A020200
03000000120013000000000012001300
00000000080200000403040300000000
00000000000000000200030002000300
00000100000000000000000000001200
13000000010001000000000014020000
18020000000004010000000000000505
05050505050500000401040104030403
040319021A0219021A0219021A021200
13000000000000000200030000000000
00001100000000000403040300000000
00000100010000001200130012001300
00000100000002000300000000000000
00000100010001000000000014020000
00000000000004010000180200001504
17041604170400000401040104030403
040309020A0209020A02080200000000
01000200030000001200130000000200
03000000110001000403040300000000
00000100000000000000000000000000
01000100000012001300000001000000
01001100000001000000000014020000
05050505050504010401040104010401
04010401040104010401040104030403
040319021A0219021A02180200000000
00001200130008020000180200001200
13000000010000000403040300000100
01000100010001000100010001000000
00000000000000000100010000000000
00000000000011000100010014020000
05050505050504010000000000000000
00000000000000000401040104030403
040309020A0209020A02000002000300
00000000000000000100110001000000
00000000000000000403040300000000
01001100010000000100000002000300
00000100000011000100000002000300
00000000000001000100000014020000
17041604170404010000050505050505
05050000180200000401040104030403
040319021A0219021A02000012001300
00001802000001000000000000000000
02000300000000000403040300000000
01000100010001000000000012001300
00000100010001000000000012001300
00000100010000000000000014020000
04010401040104010000050505050505
05050000000000000401040104030403
040309020A0218020000000000000000
01000100000002000300000001000000
12001300000000000403040300000000
01001100000000000000010000000000
00000100010000000000000000000000
00000100000000000000000014020000
04010401040104010000050505050505
05050000000004010401040104030403
040319021A0200000200030000000802
00001100000012001300000000000000
00000000000000000403040300000000
00000000000000000100010001000000
00000000000000000000020003000000
00000000000000000000000014020000
04010401040104010000150416041704
15040000000004010401040304030403
040309020A0200001200130011000000
00000000000000001100000000000200
03000000000000000403040300000000
00000000000001000100110001000000
00000000000000000000120013000000
02000300000000000000000004010401
04010401040104010401040104010000
00000000000004010401040304030403
040319021A0208020000000000000200
03000000010001000000000000001200
13000000000000000403040304030000
00000000010001000000000001000000
00000000020003000000000000000000
12001300000000000000040104010000
14021402140214021402140214021402
14021402140204010401040304030403
040309020A0200000000000018021200
13000000010000000200030000000000
00001100000000000403040304030000
00000000000000000000010001000000
00000000120013000000000001000100
00000000000011000000040100000000
00000000010000000000000002000300
00000000000004010401040304030403
040319021A0200000200030000000000
00000100010000001200130000000200
03000000000000000000040304030000
00000000110001000000000001000100
01000000000000000100110001000100
11000200030000000000040100000000
00000100010000000000000012001300
00000100000004010401040304030403
040309020A0200001200130000001802
01001100000002000300000000001200
13000000000011000100040304030000
01000000010001000100010000000100
01000000010001000100010000000100
00001200130000000000040100000000
11000100000002000300000000000000
01000000000004010401040304030403
040319021A0200000802000000000000
00000000000012001300000000000000
00000100010000000000040304030000
01000100000000000100000001001100
01000100000000000200030000000100
00000000000000000000040100000100
01000100000012001300000000000000
00000000000004010401040304030403
040309020A0200000000000000000200
03000000020003000000110001000100
01000000000000000000040304030100
01000100000000000100010001000100
01000100000000001200130000000000
00000000000000000000040100000100
01000000020003000200030001000000
00000000000004010401040304030403
040319021A0202000300000000001200
13000000120013000100010001000100
00000200030000000000040304030000
01000100000001000100010000000000
00000000000000000000000000000000
00000000000000000401040100001100
01000000120013001200130000000200
03000000000004010401040304030403
040309020A0212001300000000000000
00000200030000000000010001000100
00001200130000000000040304030000
00000000000000000000000001000000
00000000000000000000110000000200
03000000000000000401000001000100
00000200030000000000000000001200
13000000000004010401040104030403
040319021A0200000000000001000000
00001200130011000000000000000000
01000000000000000000040304030000
00000000000000000000000000000000
00000000000000000000000000001200
13000000000011000401000001000000
00001200130000000100010000000000
00000000000000000401040104030403
040309020A0218020000020003000000
00000000010000000000020003000000
01000000010011000000040304030000
00000000050505050505000000000000
05050505050505050000000000000000
00000000000000000401000000000200
03000000000001000100000000000000
00000100000000000401040104030403
040319021A0200000000120013000000
11000100010000000000120013000000
00000100010000000000040304030000
00000000050505050505000018020000
05050505060505050000000018020505
05050505000000000401000000001200
13000000000000000000020003000000
01001100010000000401040104030403
040309020A0200000000000000001100
00000000000000000000000000000000
01001100010000000000040304030000
00000000150416041704000000000000
05050505050505050000000000000505
05050605000000000401000000000000
00000000000000000000120013000000
00000100000000000401040104030403
040319021A0200001100000000000000
00000000000000000000000000000000
01000000000000000000040304030403
18020000000004010000000000000000
15041704160417041802000000001704
16041704000000000401000000000100
01000100020003000000000000000000
01000100010000000401040104030403
04030403040304030403040304030403
04030403040304030403000000000000
00000000000000000000040304030403
00000000000004010401040104010401
04010401040104010401040104010401
04010401000000000401000001001100
01000000120013000000000008020000
00000100000000000401040104030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030000000004030403
00000000000000000000000000000000
18020000000000000000000000000401
04010401040100000401000001000000
00000000180200000000010000000000
01000100000000000401040104010403
040309020A0200000000000000000000
00000000000004030403040304030403
04030403040304030403040304030403
04030000000000000505050505050000
00000000050505050505050500000401
04010401040104010401000000000000
00000802000001000000000001000000
00000000000018020000040104010403
040319021A0200000100000000000000
01001100000000000000000000000000
00000000040304030403040304030403
04030000180200000505050505050000
00000000050505050505050500000401
04010401040100000000000001000100
18020000010011000100010000000802
00000200030000000100040104010403
040309020A0201001100020003000000
01000100010000000000000000000000
00000000000000000000000004030403
04030403000000001704160417040000
00000000150416041704150400000401
04010401040100000000010001000000
09020A0209020A0209020A0200000000
01001200130001000100040104010403
040319021A0201000100120013000000
01000100000002000300000000000000
00000802000000001802000000000403
04030403040300000000040104010401
04010401040104010401040104010401
04010401040100000000010011000000
19021A0219021A0219021A0200000100
00000000010001000000040104010403
040309020A0201000000000000000100
01000000000012001300000000000802
08020000000008020000000000000000
04030403040304030000180200000000
04010401040100000000000000000000
00000000180200000100000009020A02
09020A0209020A0209020A0209020A02
08020000000000000000040104010403
040319021A0200000200030000000000
00000000000000000000000018020000
00000000000000000000000000000000
00000403040304030000000000000000
04010401040100000000000000000100
00000000000000000000000019021A02
19021A0219021A0219021A0219021A02
00000000020003000000040104010403
040309020A0218021200130008020000
02000300000000000100000000000000
00000000010001001100000000000000
00000000040304030403000000000100
04010401040100000000010001000000
0000000008020000180209020A020902
0A0209020A0209020A0209020A020802
00001802120013000000040104010403
040319021A0200000000000000000100
12001300000001000100000000000200
03000000000001000100000000000000
00000000040304030403000000000000
04010401040100000000010000000000
0000000000000000000019021A021902
1A0219021A0219021A0219021A021802
00000000000000000000040104010403
040309020A0200000000010001000000
00000000010001001100000000001200
13000000000001000000110000000100
01000000000004030403040300000000
00000401000000000000000001000100
01000000000008020000090209020A02
09020A0209020A021802000000000000
00001100000000000100040104010403
040319021A0200000802000000000000
08020000000000000100010001000000
00000100010000000000000000000100
01000000000004030403040300000100
00000401000000000100010000000100
01000000180200000000190219021A02
19021A0219021A021802050505050505
00000000010001000000040104010403
040309020A0218020000020003000000
00000000180200000000010001000000
00000100000000000000000000000100
00000000000004030403040300000000
00000401000001000100010001000100
00000000000001000100000009020A02
09020A0209020A020000050505050505
00000100000000000000040104010403
040319021A0200000000120013000000
01000000020003000000000000000000
00000000110000000200030000000100
01000000000000000403040304030000
00000401000000000000000000000000
00000802000000000000000019021A02
19021A0219021A020000150416041704
00000000010000000000040104010403
040309020A0202000300000000000000
01000000120013000000010011000100
00000000000000001200130000000100
01000000010000000403040304030000
00000401000000000200030000000100
00000000000001000000080200000902
0A0209020A0209020A02040104010401
00000000000000000000040104010403
040319021A0212001300000002000300
00000000000000000100000001000100
00000200030000000000000001000000
00000000000000000403040304030000
00000401000000001200130000000100
00000100010001000000180200001902
1A0219021A0219021A02040104010401
04010401040104010401040104010403
040309020A0218020200030012001300
00000000000001000100010000000000
00001200130000000000000001000100
00000000000014021402140214021402
00000401000000000000000000000100
01000000010000000000000001000902
0A0209020A0209020A02000004010000
00000000000000000401040104010403
040319021A0200001200130000000000
00000000010001000000010011000100
00000100000000000100010000000000
00000401040104010401040104010401
04010401000002000300020003000000
00000100000000000802000000001902
1A0219021A0219021A02000000001802
00000000000000000401040104030403
040309020A0202000300000000000000
00000100000000000100010000000000
00000000000000000100000000000000
00000401000014021402140214021402
00000000000012001300120013000000
01000000000018020000010000000902
0A0209020A0209020A02020003000000
00000200030000000401040104030403
040319021A0212001300180201000000
05050505050505050505000000000000
18020000000000000000000000000000
00000401000000000403040304030000
01000000000000000200030000000000
01000100110000000100010000001902
1A0219021A0219021A02120013000000
18021200130000000401040104030403
040309020A0200000000010001000000
05050505050506050505000018020505
05050505050505050605000000000000
00000401000000000403040304030000
00000100000000001200130000000000
01000100000002000300000000001802
09020A0209020A021802000002000300
00000000000000000401040104030403
040319021A0211000100010000000000
05050505050505050505000000000505
05050505050505050505000000000000
00000401000000000403040304030000
01000100000001000000000001000100
01000000000012001300000000000000
19021A0219021A021802000012001300
01001100000000000401040104030403
040309020A0200000100000000000000
15041704150416041504000000001504
16041704150416041704000000000000
00000401000000000403040304030000
01000100010011000100010001000100
00000000180200000000080200000902
0A0209020A0209020A02020003001802
01000000000000000401040104030403
040319021A0218020000000000001802
00000000000004020000000000000000
04020000000004020000000000000000
00000401000000000403040304030000
00000000010001000100000001000000
02000300000000000000000000001902
1A0219021A0219021A02120013000000
08020000000004010401040104030403
040309020A0200000505050505050000
00001100000004020402040204020402
04020402040204020402040104010401
04010401000000000403040304030000
00001100010001000000000001000000
12001300080200000000180200000902
0A0209020A0209020A0209020A021802
00000000000004010401040304030403
040319021A0200000505050506050000
11000000000004020402040204020402
04020402040204020402000000000000
00000100000000000403040304030000
00000100000000000000010011000100
00000000000000000000000000001902
1A0219021A0219021A0219021A020100
00000000040104010401040304030403
040309020A0200001504160417040000
00000000000004020402040204020402
04020402040204020402000000000100
01000100000000000403040304030000
01000000020003000000010001000000
00000000010000000000080200000000
09020A0209020A0209020A0200000000
00000401040104010403040304030403
040319021A0200000000040204020402
04020402040204021402140214021402
14021402140214021402000001001100
00000000000004010403040304030000
00000000120013000000010000000000
02000300010001000100000000000000
19021A0219021A0219021A0200000000
04010401040104030403040304030403
040309020A0204010401040104010401
04010401040104011402040104010401
14020401040104011402000000000000
00000000040104010403040304030403
00000000010001000100010000000000
12001300010011000100000000000000
00001802000018020000000000000401
04010401040304030403040304030403
040319021A0204010401040104010401
04010401040104010401040104010401
04010401040104010401040104010401
04010401040104030403040304030403
04010401000000000000010001000100
00000000000000000000000004010401
04010401040104010401040104010401
04010403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040104010401
04010401040304030403040304030403
04010401040104010100010000000000
00000401040104010401040104010401
04010401040104010401040104010403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030401040104010401040104010401
04010401040104010401040104010403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304010401040104010401
04010401040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
0403

